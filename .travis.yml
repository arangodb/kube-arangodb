language: go

git:
  depth: false

go:
  - "1.20.8"

go_import_path: github.com/arangodb/kube-arangodb

env:
  - GO111MODULES=off

script:
  - |
    set -e
    if [ "$TRAVIS_PULL_REQUEST" != "false" ] || [ ! -z "$ALWAYS" ]; then
      make init
      make license-verify license-range-verify fmt-verify linter vulncheck
      make run-unit-tests
      make bin
    else
      make vendor tools-min fmt-verify linter
    fi